<!-- ===== ESTADO DE CARREGAMENTO ===== -->
<div class="delete-wrapper" *ngIf="carregando">
  <div class="delete-card loading-card">
    <div class="loading-spinner"></div>
    <p class="loading-text">Carregando informações do usuário...</p>
  </div>
</div>

<!-- ===== CARD DE EXCLUSÃO ===== -->
<div class="delete-wrapper" *ngIf="!carregando">
  <div class="delete-card">
    <h2>Excluir Usuário</h2>

    <div class="info-section">
      <p><strong>Nome:</strong> {{ nomeUsuario }}</p>
      <p><strong>Email:</strong> {{ emailUsuario }}</p>
    </div>

    <!-- ✅ Aviso extra quando for o próprio usuário -->
    <div class="warning-box danger" *ngIf="isSelfDelete">
      <span class="material-icons">block</span>
      <p>
        Por motivos de segurança, você <strong>não pode excluir</strong> o seu próprio usuário logado.
      </p>
    </div>

    <!-- Aviso padrão -->
    <div class="warning-box" *ngIf="!isSelfDelete">
      <span class="material-icons">warning</span>
      <p>Esta ação é <strong>irreversível</strong>. Todos os dados serão permanentemente excluídos.</p>
    </div>

    <label>Digite o nome completo para confirmar:</label>
    <input
      [(ngModel)]="confirmacaoNome"
      placeholder="Digite exatamente como está acima"
      type="text"
      [disabled]="isSelfDelete"
      [class.valid]="confirmacaoNome === nomeUsuario"
    />

    <div class="btns">
      <button class="btn-cancelar" (click)="cancelar()" [disabled]="excluindo">
        Cancelar
      </button>

      <button
        class="btn-excluir"
        [disabled]="isSelfDelete || confirmacaoNome !== nomeUsuario || excluindo"
        (click)="confirmarExclusao()"
      >
        <span *ngIf="!excluindo">Confirmar Exclusão</span>
        <span *ngIf="excluindo" class="loading-btn">
          <span class="spinner-btn"></span>
          Excluindo...
        </span>
      </button>
    </div>

  </div>
</div>
