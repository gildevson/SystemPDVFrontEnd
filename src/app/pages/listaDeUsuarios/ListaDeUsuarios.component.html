<!-- ===== OVERLAY DO MODAL DE CADASTRO ===== -->
<div class="overlay" *ngIf="exibirCadastro" (click)="fecharOverlay()">
  <div class="container" (click)="$event.stopPropagation()">
    <app-novo-usuario
      (salvou)="aoSalvarUsuario()"
      (fechar)="fecharOverlay()">
    </app-novo-usuario>
  </div>
</div>

<div class="content-card">

  <div class="header-row">
    <h2 class="titulo">Lista de Usuários</h2>

    <button class="btn-novo" (click)="abrirOverlay()">
      <span class="material-icons">person_add</span>
      Novo Usuário
    </button>
  </div>

  <table class="tabela">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Data de Criação</th>
        <th class="col-acoes">Ações</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let u of usuarios">
        <td>{{ u.nome }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.dataCriacao | date:'dd/MM/yyyy HH:mm' }}</td>
        <td class="acoes">
          <span class="acao editar material-icons" (click)="editar(u)">edit</span>
          <span class="acao deletar material-icons" (click)="deletar(u)">delete</span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- ===== PAGINAÇÃO ===== -->
  <div class="paginacao" *ngIf="totalPages > 1">
    <button class="btn-pag" [disabled]="page === 1" (click)="buscarUsuarios(page - 1)">« Anterior</button>

    <div class="numeros">
      <button
        *ngFor="let p of [].constructor(totalPages); let i = index"
        class="num"
        [class.ativo]="page === (i + 1)"
        (click)="buscarUsuarios(i + 1)">
        {{ i + 1 }}
      </button>
    </div>

    <button class="btn-pag" [disabled]="page === totalPages" (click)="buscarUsuarios(page + 1)">
      Próxima »
    </button>
  </div>

</div>
